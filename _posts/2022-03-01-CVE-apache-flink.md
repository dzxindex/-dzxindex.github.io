---
layout: post
title: Apache Flink 远程代码执行漏洞
categories: [安全漏洞]
description: apache flink 漏洞案例

keywords: 安全漏洞, flink
---



# 前言



漏洞危害：
Apache Flink 是一个分布式大数据处理引擎，可对有限数据流和无限数据流进行有状态计算。可部署在各种集群环境，对各种大小的数据规模进行快速计算。 Apache Flink Dashboard 存在一个远程代码执行漏洞。该漏洞无需攻击者进行认证，即可通过dashboard上传一个恶意的Jar包来远程执行代码。 

漏洞级别：高危
影响范围：
<= 1.9.1(最新版本)

修复建议：
1．请勿将使用的Flink集群在公网曝露；
2． 配置Flink访问白名单； 
3． 禁止公网对于8081端口（FLink默认端口）的访问流量； 4． 额外配置相关的认证策略；


## 环境搭建:


使用docker-compose.yml

```
version: "2.2"
services:
  jobmanager:
    image: flink:1.9.1
    ports:
      - "8081:8081"
    command: jobmanager
    environment:
      - |
        FLINK_PROPERTIES=
        jobmanager.rpc.address: jobmanager

  taskmanager:
    image: flink:1.9.1
    depends_on:
      - jobmanager
    command: taskmanager
    scale: 1
    environment:
      - |
        FLINK_PROPERTIES=
        jobmanager.rpc.address: jobmanager
        taskmanager.numberOfTaskSlots: 2

```
在docker-compose目录下执行：

```
docker-compose up
```

启动之后可以访问localhost:8081

## 漏洞复现